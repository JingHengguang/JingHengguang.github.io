(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ba26866"],{"712d":function(a,e,t){"use strict";t("e03d")},c3fb:function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"fullUser"},[t("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-arrow-left"},on:{click:a.handleCancel}},[a._v("返回主页")]),t("div",{staticClass:"userinfo"},[t("el-form",{attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:"原头像:"}},[t("img",{staticClass:"updateAvatarFile",attrs:{src:a.AvatarUrl,alt:"头像加载失败..."}})]),t("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"新头像：","label-width":"100px"}},[t("el-upload",{attrs:{"list-type":"picture-card",action:a.uploadAvatarUrl,"auto-upload":!0,limit:a.limit,multiple:!1,"show-file-list":!0,"on-preview":a.handlePictureCardPreview,"on-remove":a.handleRemove,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload,"on-exceed":a.handleExceed,"on-error":a.imgUploadError}},[t("i",{staticClass:"el-icon-plus"})])],1),t("el-form-item",[t("el-dialog",{attrs:{visible:a.dialogVisibleImg},on:{"update:visible":function(e){a.dialogVisibleImg=e}}},[t("img",{attrs:{width:"100%",src:a.dialogImageUrl,alt:""}})])],1)],1)],1),t("div",{staticClass:"btn"},[t("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"primary",plain:""},on:{click:a.handleSave}},[a._v(" 确 定 "),t("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)},o=[],l=(t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("51a0")),s=t("5f87"),i=t("2612"),n={data:function(){return{uploadAvatarUrl:"http://localhost:5000/files/uploadAvatar/",dialogVisibleImg:!1,dialogImageUrl:"",baseUrl:"http://localhost:5000/files/avatarPath?avatarUrl=",limit:1,currentAvatarUrl:"UploadFiles\\DefaultImage\\default.jpg",formData:{currentId:0,username:"",password:"",userRoleId:0,avatarUrl:"",remarks:""}}},methods:{refUserInfo:function(){var a=this;Object(i["e"])(this.formData.currentId).then((function(e){200==e.code&&(console.log(e),a.formData.username=e.data.username,a.formData.userRoleId=e.data.userRoleId,a.formData.remarks=e.data.remarks,a.currentAvatarUrl=e.data.avatarUrl,a.formData.password=e.data.password,console.log(a.formData),console.log("刷新成功"))})).catch((function(a){console.log("调用失败：---\n"+a)}))},handlePictureCardPreview:function(a){console.log("预览图片"),console.log(a),this.dialogImageUrl=a.url,this.dialogVisibleImg=!0},handleRemove:function(a,e){console.log("删除头像"),console.log(e),this.formData.avatarUrl=""},beforeAvatarUpload:function(a){console.log("图片上传之前事件"),console.log(a);var e="image/jpeg"===a.type,t=a.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&t},handleAvatarSuccess:function(a,e){this.dialogImageUrl=URL.createObjectURL(e.raw),200==a.code?(this.$message.success("图片上传成功!"),this.formData.avatarUrl=a.data):this.$message.error("图片上传失败，请重新上传！")},handleExceed:function(a,e){console.log(e),this.$message.error("只能上传一张头像哦，请删除前一张后重试")},imgUploadError:function(a,e,t){console.log("图片上传失败调用"),console.log(a),console.log(e),console.log(t),this.$message.error("上传图片失败!")},handleCancel:function(){l["a"].push("/home")},handleSave:function(){var a=this;console.log(this.formData),""!=this.formData.avatarUrl?Object(i["g"])(this.formData.currentId,this.formData).then((function(e){console.log(e),a.$router.push({name:"layout",params:{avatarUrl:a.formData.avatarUrl}}),a.$message({type:"success",message:e.msg})})).catch((function(a){console.log(a)})):this.$message({type:"error",message:"请上传一张头像"})}},computed:{AvatarUrl:function(){var a=this.baseUrl+this.currentAvatarUrl;return a}},mounted:function(){this.formData.currentId=Object(s["e"])(),this.refUserInfo(this.formData.currentId)}},c=n,d=(t("712d"),t("2877")),u=Object(d["a"])(c,r,o,!1,null,"3001619a",null);e["default"]=u.exports},e03d:function(a,e,t){}}]);
//# sourceMappingURL=chunk-3ba26866.0ec1e653.js.map